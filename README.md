# عبّ الآن - نظام تقسيط وقود السيارات

<div dir="rtl">

## نظرة عامة

**عبّ الآن** هو نظام متكامل لتقسيط وقود السيارات في المملكة العربية السعودية، يتضمن ثلاث خدمات رئيسية:

### 1. خدمة تقسيط الفواتير
- إدارة فواتير الوقود
- خطط تقسيط مرنة
- تتبع المدفوعات والأقساط

### 2. صمم رحلتك
- تخطيط المسارات
- اقتراح محطات التوقف
- حساب استهلاك الوقود

### 3. محرك سنافي الذكي (Snafi AI)
نظام ذكاء اصطناعي ثوري يحول قرارات شراء الوقود من توقعات بسيطة إلى توصيات مبنية على البيانات.

---

## محرك سنافي - نظام دعم القرار الذكي

### كيف يعمل؟

```
┌─────────────────────────────────────────────────────────────┐
│                    مدخلات المستخدم                          │
│  • نسبة الوقود الحالية (مثال: 30%)                         │
│  • سعة الخزان (مثال: 60 لتر)                               │
│  • نوع الوقود (91/95/ديزل)                                 │
└─────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│                   خوارزمية سنافي                            │
│  1. المطابقة التاريخية: مقارنة مع سجلات التعبئة السابقة    │
│  2. حساب الثقة: Base 50 + (عدد السجلات × 3)                │
│  3. تحليل معدل النجاح من البيانات التاريخية                │
└─────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│                      التوصية الذكية                         │
│  • عدد اللترات المثالية                                    │
│  • التكلفة المتوقعة                                        │
│  • درجة الثقة (0-95%)                                      │
│  • خيارات بديلة                                            │
└─────────────────────────────────────────────────────────────┘
```

### خوارزمية حساب الثقة

```
درجة الثقة = الحد الأدنى(95, 50 + (عدد_السجلات × 3) + (معدل_النجاح × 0.2))
```

| عدد السجلات | معدل النجاح | درجة الثقة |
|-------------|-------------|------------|
| 0           | -           | 50%        |
| 5           | 80%         | 81%        |
| 10          | 90%         | 95%        |

---

## نظام التحقق من العملاء

### التحقق من الهوية (نفاذ)
- التحقق من الهوية الوطنية
- التأكد من العمر (18+ سنة)

### فحص الامتثال (KYC/AML)
- فحص قوائم العقوبات
- التحقق من القضايا القانونية

### السجل الائتماني (سمة)
- جلب التقرير الائتماني
- تقييم أهلية التمويل

| الدرجة | التصنيف |
|--------|---------|
| 750+   | ممتاز   |
| 650-749| جيد     |
| 550-649| مقبول   |
| 500-549| ضعيف    |
| <500   | مرفوض   |

### التحقق من التوظيف (GOSI)
- التأكد من حالة التوظيف
- حساب أولوية العميل

| القطاع | الأولوية |
|--------|----------|
| حكومي  | premium  |
| شبه حكومي | high  |
| خاص    | medium   |
| غير موظف | low    |

---

## البنية التقنية

### Frontend
- **React + TypeScript** - مكتبة واجهة المستخدم
- **Vite** - أداة البناء السريعة
- **Tailwind CSS** - تنسيق الواجهات
- **Shadcn UI** - مكونات جاهزة
- **TanStack Query** - إدارة البيانات
- **Wouter** - التوجيه

### Backend
- **Express.js + TypeScript** - خادم API
- **PostgreSQL** - قاعدة البيانات
- **Drizzle ORM** - طبقة الوصول للبيانات

### هيكل المشروع

```
├── client/
│   └── src/
│       ├── pages/          # صفحات التطبيق
│       │   ├── home.tsx    # الصفحة الرئيسية
│       │   ├── snafi.tsx   # محرك سنافي
│       │   └── ...
│       ├── components/     # المكونات المشتركة
│       ├── hooks/          # Hooks مخصصة
│       └── lib/            # مكتبات مساعدة
├── server/
│   ├── index.ts            # نقطة الدخول
│   ├── routes.ts           # مسارات API
│   ├── storage.ts          # طبقة التخزين
│   ├── db.ts               # اتصال قاعدة البيانات
│   └── services/           # خدمات الأعمال
│       ├── snafi-decision.service.ts
│       ├── nafath.service.ts
│       ├── credit.service.ts
│       └── ...
└── shared/
    └── schema.ts           # مخططات قاعدة البيانات
```

---

## نقاط API الرئيسية

### محرك سنافي

| الطريقة | المسار | الوصف |
|---------|--------|-------|
| POST | `/api/snafi/decision` | إنشاء جلسة دعم قرار جديدة |
| POST | `/api/snafi/decision/accept` | قبول التوصية |
| POST | `/api/snafi/decision/complete` | تسجيل التعبئة الفعلية |
| GET | `/api/snafi/accuracy/:userId` | إحصائيات دقة النظام |
| GET | `/api/snafi/fuel-price/:fuelType` | سعر الوقود الحالي |

### التحقق من العملاء

| الطريقة | المسار | الوصف |
|---------|--------|-------|
| POST | `/api/verification/nafath/initiate` | بدء التحقق من الهوية |
| POST | `/api/verification/credit/report` | جلب التقرير الائتماني |
| POST | `/api/verification/employment/verify` | التحقق من التوظيف |
| POST | `/api/verification/customer/evaluate` | التقييم الشامل |

---

## أسعار الوقود الافتراضية

| نوع الوقود | السعر (ريال/لتر) |
|------------|------------------|
| بنزين 91   | 2.18             |
| بنزين 95   | 2.33             |
| ديزل       | 0.52             |

---

## التشغيل

### المتطلبات
- Node.js 18+
- PostgreSQL

### التثبيت

```bash
# تثبيت الحزم
npm install

# مزامنة قاعدة البيانات
npm run db:push

# تشغيل التطوير
npm run dev
```

---

## التصميم

### الألوان
- **الأساسي**: برتقالي/ذهبي (موضوع الوقود)
- **الثانوي**: أزرق داكن

### الميزات
- دعم كامل للغة العربية (RTL)
- الوضع الليلي والنهاري
- تصميم متجاوب للجوال والشاشات الكبيرة

---

## الترخيص

جميع الحقوق محفوظة © 2024

</div>
